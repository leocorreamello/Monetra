<div class="upload-container">
  <input type="file" (change)="onFileSelected($event)" accept=".pdf" />
  <p>Arraste seu extrato PDF ou clique para selecionar.</p>
  <select [(ngModel)]="selectedAno" (change)="filterByAnoMes()">
    <option value="">Todos os Anos</option>
    <option *ngFor="let ano of uniqueAnos" [value]="ano">{{ ano }}</option>
  </select>
  <select [(ngModel)]="selectedMes" (change)="filterByAnoMes()">
    <option value="">Todos os Meses</option>
    <option *ngFor="let mes of uniqueMeses" [value]="mes">{{ mes }}</option>
  </select>
  <button (click)="deleteSelectedAnoMes()" [disabled]="!selectedAno || !selectedMes">Excluir Selecionado</button>
  <table *ngIf="filteredTransactions.length > 0">
    <thead>
      <tr>
        <th>Data</th>
        <th>Descrição</th>
        <th>Valor</th>
        <th>Tipo</th>
        <th>Categoria</th>
        <th>Mês</th>
        <th>Ano</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let transaction of filteredTransactions">
        <td>{{ transaction.data }}</td>
        <td>{{ transaction.descricao }}</td>
        <td [class.entrada]="transaction.tipo === 'entrada'" [class.saida]="transaction.tipo === 'saida'">{{ transaction.valor }}</td>
        <td>{{ transaction.tipo }}</td>
        <td>{{ transaction.categoria }}</td>
        <td>{{ transaction.mes }}</td>
        <td>{{ transaction.ano }}</td>
      </tr>
      <tr>
        <td colspan="2">Saldo Final</td>
        <td [class.entrada]="saldoFinal > 0" [class.saida]="saldoFinal < 0">{{ saldoFinal }}</td>
        <td colspan="4"></td>
      </tr>
    </tbody>
  </table>
  <p *ngIf="filteredTransactions.length === 0">Nenhuma transação carregada ainda.</p>
</div>